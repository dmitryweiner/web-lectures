<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>React - Form validation</title>
    <link rel="shortcut icon" href="./favicon.ico"/>
    <link rel="stylesheet" href="./dist/reveal.css" />
    <link rel="stylesheet" href="./dist/theme/serif.css" id="theme" />
    <link rel="stylesheet" href="./css/highlight/zenburn.css" />

  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section  data-markdown><script type="text/template">

## –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º –≤ React.js

![react validation](assets/react-validation/img.png)

[–≤—Å–µ –ª–µ–∫—Ü–∏–∏](https://github.com/dmitryweiner/lectures/blob/main/README.md)

[–≤–∏–¥–µ–æ]()</script></section><section  data-markdown><script type="text/template">
### –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
> –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–¥–∞–Ω–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É.
* –ë—ã–≤–∞–µ—Ç –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ (JS) –∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞.
* –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–∞–Ω–Ω—ã–º:
  * –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º).
  * –î–ª–∏–Ω–∞ (max, min).
  * –§–æ—Ä–º–∞—Ç (—Ç–µ–ª–µ—Ñ–æ–Ω, email, –Ω–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞).
  * –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤ (—Ç–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ, etc.).</script></section><section  data-markdown><script type="text/template">
### –ú–æ–º–µ–Ω—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏
* –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è: –ø—Ä–∏ –≤–≤–æ–¥–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.
* –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã: –æ—à–∏–±–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ 
–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ.</script></section><section  data-markdown><script type="text/template">
### –ó–∞–¥–∞—á–∞
* –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–æ—Ä–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
<br/>–õ–æ–≥–∏–Ω:
<input>
<br/>–ü–∞—Ä–æ–ª—å:
<input>
<br/><button>–í–æ–π—Ç–∏</button></script></section><section  data-markdown><script type="text/template">
### –£—Å–ª–æ–≤–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
* –ü–æ–ª–µ "–õ–æ–≥–∏–Ω":
  * –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ.
  * –°–æ–¥–µ—Ä–∂–∏—Ç –æ—Ç 6 –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤.
  * –¢—É–¥–∞ –º–æ–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –±—É–∫–≤—ã –ª–∞—Ç–∏–Ω—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞ –∏ —Ü–∏—Ñ—Ä—ã.
* –ü–æ–ª–µ "–ü–∞—Ä–æ–ª—å":
  * –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ.
* –í–∞–ª–∏–¥–∞—Ü–∏—è –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "–í–æ–π—Ç–∏".</script></section><section  data-markdown><script type="text/template">
### –§–æ—Ä–º–∞
* –í —Å—Ç–µ–π—Ç–µ —Ñ–æ—Ä–º—ã –¥–æ–ª–∂–Ω—ã –ª–µ–∂–∞—Ç—å –≤–≤–µ–¥—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (2 –ø–æ–ª—è).
* –¢–∞–∫–∂–µ –≤ —Å—Ç–µ–π—Ç–µ –¥–æ–ª–∂–Ω—ã –ª–µ–∂–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö –≤ –ø–æ–ª—è—Ö.
* –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ñ—É–Ω–∫—Ü–∏—è `isValid()`, –∫–æ—Ç–æ—Ä—É—é –≤—ã–∑—ã–≤–∞—é—Ç –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã. 
  * –û–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true –µ—Å–ª–∏ –≤—Å—ë –≤–∞–ª–∏–¥–Ω–æ, –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ä–º—ã –∏–¥—ë—Ç –¥–∞–ª—å—à–µ (–æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä?).
  * –û–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç false, –µ—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏. –û—à–∏–±–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
</script></section><section  data-markdown><script type="text/template">
### –§–æ—Ä–º–∞
```tsx
export default function Form() {
  const [login, setLogin] = useState("");
  const [loginError, setLoginError] = useState("");
  const [password, setPassword] = useState("");
  const [passwordError, setPasswordError] = useState("");

  const isValid = (): boolean => {
    // TODO
    return true;
  };

  const handleSubmit = (e: FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    if (isValid()) {
      // –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    }
  };

  return <>
    <form onSubmit={handleSubmit}>
      <div>
        <label>–õ–æ–≥–∏–Ω:
          <input 
            value={login} 
            onChange={e => setLogin(e.target.value)}/>
        </label>
      </div>
      <div>
        <label>–ü–∞—Ä–æ–ª—å:
          <input 
            type="password" 
            value={password} 
            onChange={e => setPassword(e.target.value)}/>
        </label>
      </div>
      <button type="submit">–í–æ–π—Ç–∏</button>
    </form>
  </>;
}
```
</script></section><section  data-markdown><script type="text/template">
### –ù–∞–ø–∏—à–µ–º —Ñ—É–Ω–∫—Ü–∏—é –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```ts
const isValid = (): boolean => {
  let result = true;
  if (login.length === 0) {
    setLoginError("–õ–æ–≥–∏–Ω –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º.");
    result = false;
  }

  if (!/^([a-z0-9]{6,20})$/.test(login)) {
    setLoginError("–õ–æ–≥–∏–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç 6 –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤ –ª–∞—Ç–∏–Ω—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞ –∏ —Ü–∏—Ñ—Ä—ã.");
    result = false;
  }

  if (password.length === 0) {
    setPasswordError("–ü–∞—Ä–æ–ª—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º.");
    result = false;
  }

  return result;
};
```</script></section><section  data-markdown><script type="text/template">
### –ù–∞–ø–∏—à–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
```css
.error {
    color: red;
}
```

```tsx
    <form onSubmit={handleSubmit}>
  <div>
    <label>–õ–æ–≥–∏–Ω:
      <input value={login} onChange={e => setLogin(e.target.value)}/>
    </label>
    {loginError && <div className={styles.error}>
      {loginError}
    </div>}
  </div>
  <div>
    <label>–ü–∞—Ä–æ–ª—å:
      <input type="password" value={password} onChange={e => setPassword(e.target.value)}/>
    </label>
    {passwordError && <div className={styles.error}>
      {passwordError}
    </div>}
  </div>
  <button type="submit">–í–æ–π—Ç–∏</button>
</form>
```
</script></section><section  data-markdown><script type="text/template">
### –§–æ—Ä–º–∞ –≤ —Å–±–æ—Ä–µ
```tsx
import { FormEvent, useState } from "react";
import styles from "./Form.module.css";

export default function Form() {
  const [login, setLogin] = useState("");
  const [loginError, setLoginError] = useState("");
  const [password, setPassword] = useState("");
  const [passwordError, setPasswordError] = useState("");

  const isValid = (): boolean => {
    let result = true;

    // –æ—á–∏—â–∞–µ–º –æ—à–∏–±–∫–∏
    setLoginError("");

    if (!/^([a-z0-9]{6,20})$/.test(login)) {
      setLoginError("–õ–æ–≥–∏–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç 6 –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤ –ª–∞—Ç–∏–Ω—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞ –∏ —Ü–∏—Ñ—Ä—ã.");
      result = false;
    }

    if (login.length === 0) {
      setLoginError("–õ–æ–≥–∏–Ω –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º.");
      result = false;
    }

    setPasswordError("");

    if (password.length === 0) {
      setPasswordError("–ü–∞—Ä–æ–ª—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º.");
      result = false;
    }

    return result;
  };

  const handleSubmit = (e: FormEvent<HTMLFormElement>) => {
    e.preventDefault();

    if (isValid()) {
      // –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    }
  };

  return <>
    <form onSubmit={handleSubmit}>
      <div>
        <label>–õ–æ–≥–∏–Ω:
          <input value={login} onChange={e => setLogin(e.target.value)}/>
        </label>
        {loginError && <div className={styles.error}>
          {loginError}
        </div>}
      </div>
      <div>
        <label>–ü–∞—Ä–æ–ª—å:
          <input type="password" value={password} onChange={e => setPassword(e.target.value)}/>
        </label>
        {passwordError && <div className={styles.error}>
          {passwordError}
        </div>}
      </div>
      <button type="submit">–í–æ–π—Ç–∏</button>
    </form>
  </>;
}
```</script></section><section  data-markdown><script type="text/template">
### –ü–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã –ø–æ–¥—Ö–æ–¥–∞
* –ü–ª—é—Å—ã:
  * –ü—Ä–æ—Å—Ç–æ.
* –ú–∏–Ω—É—Å—ã:
  * –ï—Å–ª–∏ –ø–æ–ª–µ–π –º–Ω–æ–≥–æ (–±–æ–ª—å—à–µ 2), –∫–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª–∞–ø—à–µ–æ–±—Ä–∞–∑–Ω—ã–º üçú –∏ —Å–ª–∞–±–æ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º.</script></section><section  data-markdown><script type="text/template">
### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
* –ö–æ—Å—Ç—ã–ª—å:
  * –°–∫–ª–∞–¥—ã–≤–∞—Ç—å —Ñ–æ—Ä–º—É –≤ –æ–±—ä–µ–∫—Ç —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø–æ–ª—è–º —Ñ–æ—Ä–º—ã.
  * –°–∫–ª–∞–¥—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ –æ–±—ä–µ–∫—Ç —Å –ø–æ–ª—è–º–∏.
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ä–º—ã —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
  * [Formik](https://formik.org/).
  * [Final-form](https://final-form.org/react/).</script></section><section  data-markdown><script type="text/template">
### final-form
* [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ](https://final-form.org/docs/react-final-form/getting-started).
* –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
```shell
npm i final-form react-final-form
```
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```jsx
import { Form, Field } from 'react-final-form'

const MyForm = () => (
  <Form
    onSubmit={onSubmit}
    validate={validate}
    render={({ handleSubmit }) => (
      <form onSubmit={handleSubmit}>
        <h2>Simple Default Input</h2>
        <div>
          <label>First Name</label>
          <Field name="firstName" component="input" placeholder="First Name" />
        </div>

        <h2>An Arbitrary Reusable Input Component</h2>
        <div>
          <label>Interests</label>
          <Field name="interests" component={InterestPicker} />
        </div>

        <h2>Render Function</h2>
        <Field
          name="bio"
          render={({ input, meta }) => (
            <div>
              <label>Bio</label>
              <textarea {...input} />
              {meta.touched && meta.error && <span>{meta.error}</span>}
            </div>
          )}
        />

        <h2>Render Function as Children</h2>
        <Field name="phone">
          {({ input, meta }) => (
            <div>
              <label>Phone</label>
              <input type="text" {...input} placeholder="Phone" />
              {meta.touched && meta.error && <span>{meta.error}</span>}
            </div>
          )}
        </Field>

        <button type="submit">Submit</button>
      </form>
    )}
  />
)
```</script></section><section  data-markdown><script type="text/template">
### final-form
* –ü–ª—é—Å—ã:
  * –ù–µ –Ω–∞–¥–æ —Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–ª—è –≤ state.
  * –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–Ω–µ—Å–µ–Ω–∞ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ñ–æ—Ä–º—ã.
  * –í–æ–∑–º–æ–∂–Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å.
  * –•–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Material UI.
* –ú–∏–Ω—É—Å—ã:
  * –í—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞.</script></section><section  data-markdown><script type="text/template">
* –û—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ. –ë—ã–ª–æ:

```tsx
<div>
  <label>–õ–æ–≥–∏–Ω:
    <input value={login} onChange={e => setLogin(e.target.value)}/>
  </label>
  {loginError && <div className={styles.error}>
    {loginError}
  </div>}
</div>
```

* –°—Ç–∞–ª–æ:

```tsx
<Field name="login">
  {({input, meta}) => (
    <div>
      <label>–õ–æ–≥–∏–Ω:
        <input type="text" {...input} placeholder="–õ–æ–≥–∏–Ω"/>
      </label>
      {meta.touched && meta.error && <div className={styles.error}>{meta.error}</div>}
    </div>
  )}
</Field>
```</script></section><section  data-markdown><script type="text/template">
### –§—É–Ω–∫—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```ts
type FormValues = {
  login: string;
  password: string;
};

const isValid = (values: FormValues): ValidationErrors => {
  const errors: ValidationErrors = {}
  if (!/^([a-z0-9]{6,20})$/.test(values?.login)) {
    errors.login = "–õ–æ–≥–∏–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç 6 –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤ –ª–∞—Ç–∏–Ω—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞ –∏ —Ü–∏—Ñ—Ä—ã.";
  }

  if (!values?.login) {
    errors.login = "–õ–æ–≥–∏–Ω –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º.";
  }

  if (!values?.password) {
    errors.password = "–ü–∞—Ä–æ–ª—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º.";
  }

  return errors;
};
```</script></section><section  data-markdown><script type="text/template">
### –§–æ—Ä–º–∞ –≤ —Å–±–æ—Ä–µ

```tsx
import React from "react";
import { ValidationErrors } from "final-form";
import { Form as FinalForm, Field } from 'react-final-form'
import styles from "./Form.module.css";

type FormValues = {
  login: string;
  password: string;
};

export default function Form() {
  const isValid = (values: FormValues): ValidationErrors => {
    const errors: ValidationErrors = {}
    if (!/^([a-z0-9]{6,20})$/.test(values?.login)) {
      errors.login = "–õ–æ–≥–∏–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç 6 –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤ –ª–∞—Ç–∏–Ω—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞ –∏ —Ü–∏—Ñ—Ä—ã.";
    }

    if (!values?.login) {
      errors.login = "–õ–æ–≥–∏–Ω –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º.";
    }

    if (!values?.password) {
      errors.password = "–ü–∞—Ä–æ–ª—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º.";
    }

    return errors;
  };

  const onSubmit = (values: FormValues) => {
    // –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    console.log(values);
  };

  return <>
    <FinalForm
      onSubmit={onSubmit}
      validate={isValid}
      render={({handleSubmit}) => (
        <form onSubmit={handleSubmit}>
          <Field name="login">
            {({input, meta}) => (
              <div>
                <label>–õ–æ–≥–∏–Ω:
                  <input type="text" {...input} placeholder="–õ–æ–≥–∏–Ω"/>
                </label>
                {meta.touched && meta.error && <div className={styles.error}>{meta.error}</div>}
              </div>
            )}
          </Field>
          <Field name="password">
            {({input, meta}) => (
              <div>
                <label>–ü–∞—Ä–æ–ª—å:
                  <input type="password" {...input} placeholder="–ü–∞—Ä–æ–ª—å"/>
                </label>
                {meta.touched && meta.error && <div className={styles.error}>{meta.error}</div>}
              </div>
            )}
          </Field>
          <button type="submit">–í–æ–π—Ç–∏</button>
        </form>
      )}>
    </FinalForm>
  </>;
}
```</script></section><section  data-markdown><script type="text/template">
### –í–∞–ª–∏–¥–∞—Ü–∏—é –º–æ–∂–Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–ª—è
* –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:

```ts
const required = value => (value ? undefined : 'Required')
const mustBeNumber = value => (isNaN(value) ? 'Must be a number' : undefined)
const minValue = min => value =>
  isNaN(value) || value >= min ? undefined : `Should be greater than ${min}`
const composeValidators = (...validators) => value =>
  validators.reduce((error, validator) => error || validator(value), undefined)
```

* –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏—Ö –≤ –ø–æ–ª–µ Field.validate:

```tsx
<Field name="firstName" validate={required}>
  {({ input, meta }) => (
    <div>
      <label>First Name</label>
      <input {...input} type="text" placeholder="First Name" />
      {meta.error && meta.touched && <span>{meta.error}</span>}
    </div>
  )}
</Field>
```</script></section><section  data-markdown><script type="text/template">
### –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–ª—è
* –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å:

```tsx
<Field
  name="age"
  validate={composeValidators(required, mustBeNumber, minValue(18))}
>
  {({ input, meta }) => (
    <div>
      <label>Age</label>
      <input {...input} type="text" placeholder="Age" />
      {meta.error && meta.touched && <span>{meta.error}</span>}
    </div>
  )}
</Field>
```
* [–ü—Ä–∏–º–µ—Ä](https://codesandbox.io/s/github/final-form/react-final-form/tree/master/examples/field-level-validation?file=/index.js).</script></section><section  data-markdown><script type="text/template">
### –ü–µ—Ä–µ–ø–∏—à–µ–º –Ω–∞—à—É —Ñ–æ—Ä–º—É –Ω–∞ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞—Ö –ø–æ–ª–µ–π
* –í—ã–¥–µ–ª–∏–º –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

```ts
const required = (value: string) => (value ? undefined : "–≠—Ç–æ –ø–æ–ª–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
const validLogin = (value: string) => {
  if (!/^([a-z0-9]{6,20})$/.test(value)) {
    return "–õ–æ–≥–∏–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç 6 –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤ –ª–∞—Ç–∏–Ω—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞ –∏ —Ü–∏—Ñ—Ä—ã.";
  }
  return undefined;
};
const composeValidators = (...validators: any[]) => (value: string) =>
        validators.reduce((error, validator) => error || validator(value), undefined)
```</script></section><section  data-markdown><script type="text/template">
### –ü–æ–ª—è –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
```tsx
<Field name="login" validate={composeValidators(required, validLogin)}>
  {({input, meta}) => (
    <div>
      <label>–õ–æ–≥–∏–Ω:
        <input type="text" {...input} placeholder="–õ–æ–≥–∏–Ω"/>
      </label>
      {meta.touched && meta.error && <div className={styles.error}>{meta.error}</div>}
    </div>
  )}
</Field>
<Field name="password" validate={required}>
  {({input, meta}) => (
    <div>
      <label>–ü–∞—Ä–æ–ª—å:
        <input type="password" {...input} placeholder="–ü–∞—Ä–æ–ª—å"/>
      </label>
      {meta.touched && meta.error && <div className={styles.error}>{meta.error}</div>}
    </div>
  )}
</Field>
```</script></section><section  data-markdown><script type="text/template">
### –§–æ—Ä–º–∞ –≤ —Å–±–æ—Ä–µ
```tsx
import React from "react";
import { Form as FinalForm, Field } from 'react-final-form'
import styles from "./Form.module.css";

type FormValues = {
  login: string;
  password: string;
};

const required = (value: string) => (value ? undefined : "–≠—Ç–æ –ø–æ–ª–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
const validLogin = (value: string) => {
  if (!/^([a-z0-9]{6,20})$/.test(value)) {
    return "–õ–æ–≥–∏–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç 6 –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤ –ª–∞—Ç–∏–Ω—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞ –∏ —Ü–∏—Ñ—Ä—ã.";
  }
  return undefined;
};
const composeValidators = (...validators: any[]) => (value: string) =>
        validators.reduce((error, validator) => error || validator(value), undefined)

export default function Form() {
  const onSubmit = (values: FormValues) => {
    // –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    console.log(values);
  };

  return <>
    <FinalForm
      onSubmit={onSubmit}
      render={({handleSubmit}) => (
        <form onSubmit={handleSubmit}>
          <Field name="login" validate={composeValidators(required, validLogin)}>
            {({input, meta}) => (
              <div>
                <label>–õ–æ–≥–∏–Ω:
                  <input type="text" {...input} placeholder="–õ–æ–≥–∏–Ω"/>
                </label>
                {meta.touched && meta.error && <div className={styles.error}>{meta.error}</div>}
              </div>
            )}
          </Field>
          <Field name="password" validate={required}>
            {({input, meta}) => (
              <div>
                <label>–ü–∞—Ä–æ–ª—å:
                  <input type="password" {...input} placeholder="–ü–∞—Ä–æ–ª—å"/>
                </label>
                {meta.touched && meta.error && <div className={styles.error}>{meta.error}</div>}
              </div>
            )}
          </Field>
          <button type="submit">–í–æ–π—Ç–∏</button>
        </form>
      )}>
    </FinalForm>
  </>;
}
```</script></section><section  data-markdown><script type="text/template">
### Validation Schema
* –ú–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ –≤–∏–¥–µ —Å—Ö–µ–º—ã.
* –≠—Ç–æ —É–¥–æ–±–Ω–µ–µ, —á–µ–º –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã.
* –£–¥–æ–±–Ω–æ —ç—Ç–æ –¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ [Yup](https://github.com/jquense/yup).
* –£—Å—Ç–∞–Ω–æ–≤–∫–∞:
```shell
npm i yup
```
* [–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã](https://codesandbox.io/s/yup-v032-react-final-form-typescript-ogkmq?file=/src/components/App.tsx).</script></section><section  data-markdown><script type="text/template">
### Validation Schema: –ø—Ä–∏–º–µ—Ä –∏–∑ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
```js
export const InformationSchema = yup.object({
  firstName: yup.string().required('First Name is required'),
  lastName: yup.string().required('Last Name is required'),
  birthDate: yup
          .string()
          .nullable()
          .required('Date of birth is required')
          .test('birthDate', function testSSN(value) {
            if (_.isNil(value)) {
              return this.createError({
                message: 'Birth date is required',
                path: 'birthDate',
              });
            }

            const birthDate = DateTime.fromISO(value).startOf('day');
            const today = DateTime.now().startOf('day');
            if (birthDate > today) {
              return this.createError({
                message: 'Birth date is invalid',
                path: 'birthDate',
              });
            }

            return true;
          }),
  phone: yup.object({
    number: yup
            .string()
            .matches(/^[0-9]{10}$/, { message: 'Phone is invalid' })
            .nullable()
            .required('Phone is required'),
  }),
  companyName: yup.string().required('Company Name is required'),
  employeeCount: yup.number().required('Total Employee Count is required'),
  industry: yup
          .string()
          .matches(/^\d{6}$/, 'Field must be 6 digits')
          .nullable()
          .optional(),
  taxYearEndDay: yup.string().nullable().required('Tax Year End Day is required'),
  taxYearEndMonth: yup.string().nullable().required('Tax Year End Month is required'),
  address: yup.object({
    street1: yup.string().required('Street address is required'),
    state: yup.string().required('State is required'),
    city: yup.string().required('City is required'),
    apartment: yup.string().nullable().optional(),
    zip: yup
            .string()
            .test('ZipCode_numeric', 'Zip Code should be numeric', value => /^\d+$/.test(value || ''))
            .required('Zip Code is required'),
  }),
});
```</script></section><section  data-markdown><script type="text/template">
### –ù–∞–ø–∏—à–µ–º —Å—Ö–µ–º—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```ts
const validationSchema = yup.object({
  login: yup
    .string()
    .matches(/^([a-z0-9]{6,20})$/, "–õ–æ–≥–∏–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç 6 –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤ –ª–∞—Ç–∏–Ω—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞ –∏ —Ü–∏—Ñ—Ä—ã.")
    .required("–õ–æ–≥–∏–Ω –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º."),
  password: yup
    .string()
    .required("–ü–∞—Ä–æ–ª—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º."),
});

const validate = async (
  values: FormValues
): Promise<ValidationErrors | undefined> => {
  try {
    await validationSchema.validate(values, {abortEarly: false})
  } catch (error: any) {
    const errors: { [value: string]: string } = {};
    error.inner.forEach((e: ValidationError) => {
      if (e.path) {
        errors[e.path] = e.message;
      }
    });
    return errors;
  }
}
```</script></section><section  data-markdown><script type="text/template">
### –§–æ—Ä–º–∞ –≤ —Å–±–æ—Ä–µ
```tsx
import { ValidationErrors } from "final-form";
import React from "react";
import { Form as FinalForm, Field } from 'react-final-form'
import { ValidationError } from "yup";
import styles from "./Form.module.css";
import * as yup from 'yup';

type FormValues = {
  login: string;
  password: string;
}

const validationSchema = yup.object({
  login: yup
    .string()
    .matches(/^([a-z0-9]{6,20})$/, "–õ–æ–≥–∏–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç 6 –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤ –ª–∞—Ç–∏–Ω—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞ –∏ —Ü–∏—Ñ—Ä—ã.")
    .required("–õ–æ–≥–∏–Ω –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º."),
  password: yup
    .string()
    .required("–ü–∞—Ä–æ–ª—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º."),
});

const validate = async (
  values: FormValues
): Promise<ValidationErrors | undefined> => {
  try {
    await validationSchema.validate(values, {abortEarly: false})
  } catch (error: any) {
    const errors: { [value: string]: string } = {};
    error.inner.forEach((e: ValidationError) => {
      if (e.path) {
        errors[e.path] = e.message;
      }
    });
    return errors;
  }
}

export default function Form() {
  const onSubmit = (values: FormValues) => {
    // –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    console.log(values);
  };

  return <>
    <FinalForm
      onSubmit={onSubmit}
      validate={validate}
      render={({handleSubmit}) => (
        <form onSubmit={handleSubmit}>
          <Field name="login">
            {({input, meta}) => (
              <div>
                <label>–õ–æ–≥–∏–Ω:
                  <input type="text" {...input} placeholder="–õ–æ–≥–∏–Ω"/>
                </label>
                {meta.touched && meta.error && <div className={styles.error}>{meta.error}</div>}
              </div>
            )}
          </Field>
          <Field name="password">
            {({input, meta}) => (
              <div>
                <label>–ü–∞—Ä–æ–ª—å:
                  <input type="password" {...input} placeholder="–ü–∞—Ä–æ–ª—å"/>
                </label>
                {meta.touched && meta.error && <div className={styles.error}>{meta.error}</div>}
              </div>
            )}
          </Field>
          <button type="submit">–í–æ–π—Ç–∏</button>
        </form>
      )}>
    </FinalForm>
  </>;
}
```</script></section><section  data-markdown><script type="text/template">
### –ó–∞–¥–∞—á–∏
* –ù–∞–ø–∏—Å–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
  * –ü–æ–ª–µ "–õ–æ–≥–∏–Ω":
    * –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ.
    * –°–æ–¥–µ—Ä–∂–∏—Ç –æ—Ç 6 –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤.
    * –¢—É–¥–∞ –º–æ–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –±—É–∫–≤—ã –ª–∞—Ç–∏–Ω—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞ –∏ —Ü–∏—Ñ—Ä—ã.
  * –ü–æ–ª–µ "–ü–∞—Ä–æ–ª—å":
    * –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ.
  * –ü–æ–ª–µ "–ü–æ–≤—Ç–æ—Ä –ø–∞—Ä–æ–ª—è":
    * –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ.
    * –î–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –ø–∞—Ä–æ–ª–µ–º.</script></section><section  data-markdown><script type="text/template">
### –ó–∞–¥–∞—á–∏
* –ù–∞–ø–∏—Å–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è:
  * –ò–º—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).
  * –û—Ç—á–µ—Å—Ç–≤–æ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).
  * –§–∞–º–∏–ª–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).
  * –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (–î–î.–ú–ú.–ì–ì–ì–ì, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
  * –ê–¥—Ä–µ—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).</script></section><section  data-markdown><script type="text/template">
### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏
* https://blog.shahednasser.com/how-to-create-and-validate-forms-in-react-using-formik-and-yup/
* https://developer.mozilla.org/ru/docs/Learn/Forms/Form_validation
* https://guides.kontur.ru/principles/validation/
* https://regex101.com/</script></section><section  data-markdown><script type="text/template">
![](assets/react-validation/img_3.png)</script></section></div>
    </div>

    <script src="./dist/reveal.js"></script>

    <script src="./plugin/markdown/markdown.js"></script>
    <script src="./plugin/highlight/highlight.js"></script>
    <script src="./plugin/zoom/zoom.js"></script>
    <script src="./plugin/notes/notes.js"></script>
    <script src="./plugin/math/math.js"></script>
    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        plugins: [
          RevealMarkdown,
          RevealHighlight,
          RevealZoom,
          RevealNotes,
          RevealMath
        ]
      };

      // options from URL query string
      var queryOptions = Reveal().getQueryHash() || {};

      var options = extend(defaultOptions, {}, queryOptions);
    </script>


    <script>
      Reveal.initialize(options);
    </script>
  </body>
</html>
